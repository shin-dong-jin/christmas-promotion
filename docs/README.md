## 4주 차 미션 - 크리스마스 프로모션   
*Contact: 6기 프리코스 신동진(y2kf9a0q@gmail.com)*  

* * * * *  

### 프로그램 소개   
비즈니스팀에게 크리스마스 프로모션 협조 메일을 받았다.   
요구 사항을 충족하는 **'12월 이벤트 플래너'** 를 개발해서 이벤트 목표를 달성하자.   
> **12월 이벤트 플래너**   
> 고객들이 식당에 방문할 날짜와 메뉴를 미리 선택하면   
> <주문 메뉴> <할인 전 총주문 금액> <증정 메뉴> <혜택 내역> <총혜택 금액> <할인 후 예상 결제 금액> <12월 이벤트 배지>를 보여주는 프로그램   

<br/>

#### 프로그램 진행 순서   
- 고객에게 예상 방문 날짜를 입력 받는다.
- 예상 방문 날짜를 저장한다.
- 고객에게 주문 메뉴와 개수를 입력 받는다.
- 주문 메뉴와 개수를 저장한다.
- 할인 전 총주문 금액을 계산한다.
- 증정 메뉴를 계산한다.
- 혜택 내역을 계산한다.
- 총혜택 금액을 계산한다.
- 할인 후 예상 결제 금액을 계산한다.
- 이벤트 배지를 계산한다.
- 계산 결과를 출력해서 보여준다.

<br/>

#### 프로그램 주요 기능   
- 입력
  - 예상 방문 날짜
  - 주문 메뉴와 개수
- 연산
  - 총주문 금액 (할인 전)
  - 혜택 내역
  - 총혜택 금액
  - 예상 결제 금액 (할인 후)
  - 이벤트 배지
- 출력
  - 프로그램 진행 문구
  - 주문 메뉴와 개수
  - 총주문 금액 (할인 전)
  - 증정 메뉴
  - 혜택 내역
  - 총혜택 금액
  - 예상 결제 금액 (할인 후)
  - 이벤트 배지
  - 에러 메세지
- 예외 처리
  - 예상 방문 날짜  
    - 숫자가 아닐 때
    - 1 이상 31 이하가 아닐 때
  - 주문 메뉴와 개수
    - 입력이 형식에 맞지 않을 때
  - 주문 메뉴
    - 없는 메뉴를 입력했을 때
    - 중복 메뉴를 입력했을 때
    - 음료만 주문했을 때
  - 주문 개수
    - 숫자가 아닐 때
    - 0 또는 음수일 때
    - 총 개수가 20개를 초과할 때

* * * * *  

### 프로그램 상세   
**christmas**  
* Application  
프로그램의 시작점  
Reader와 Writer 객체를 생성하고 PromotionController에 주입해서 크리스마스 프로모션 프로그램을 실행
  
<br/>  

**christmas.domain**  
unit  
* Day  
날짜를 저장하는 클래스  
프로그램에서 사용되는 모든 날짜 연산은 Day 클래스를 통해서 구현  
* Money  
화폐를 저장하는 클래스  
프로그램에서 사용되는 모든 돈 연산은 Money 클래스를 통해서 구현  
* Order  
사용자가 주문한 메뉴, 개수 쌍 1개를 저장하는 클래스  
* Orders  
Order의 리스트를 저장하는 클래스  
중복 여부를 계산하고 List를 Map으로 변환 
* OrdersMenuCount  
사용자의 주문 목록을 저장하는 클래스  
필드에 Map을 갖고있으며 실행 과정에서 Order - Orders - OrdersMenuCount 순서로 변환  
* Presents  
사용자가 증정받을 메뉴의 리스트를 저장하는 클래스  
증정 메뉴 목록을 출력하고 혜택 금액을 계산  

period  
* ChristmasDiscountPeriod  
크리스마스 할인 혜택 기간에 해당되는 클래스  
Day를 필드로 갖고있으며 유효한 날짜인지 검사
* MenuPresentGivePeriod  
메뉴 증정 혜택 기간에 해당되는 클래스  
Day를 필드로 갖고있으며 유효한 날짜인지 검사
* SpecialDiscountPeriod  
특별 할인 혜택 기간에 해당되는 클래스  
Day를 필드로 갖고있으며 유효한 날짜인지 검사
* WeekdayDiscountPeriod  
평일 할인 혜택 기간에 해당되는 클래스  
Day를 필드로 갖고있으며 유효한 날짜인지 검사
* WeekendDiscountPeriod  
주말 할인 혜택 기간에 해당되는 클래스  
Day를 필드로 갖고있으며 유효한 날짜인지 검사

discount  
* Discount  
할인 혜택을 추상화 한 인터페이스  
* Discounts  
할인 혜택 리스트를 저장하는 클래스  
* ChristmasDiscount  
크리스마스 할인 혜택을 계산하고 출력하는 클래스  
* SpecialDiscount  
특별 할인 혜택을 계산하고 출력하는 클래스  
* WeekdayDiscount  
평일 할인 혜택을 계산하고 출력하는 클래스  
* WeekendDiscount  
주말 할인 혜택을 계산하고 출력하는 클래스  

present  
* PresentGive  
증정 혜택을 추상화 한 인터페이스
* MenuPresentGive  
메뉴 증정 혜택을 구체화한 클래스  
PresentGive 인터페이스를 구현

policy  
* BadgePolicy  
이벤트 배지 발급을 관리하는 클래스  
총 혜택 금액에 따라 배지를 발급
* DiscountPresentPolicy  
할인 증정 혜택을 관리하는 클래스  
총 결제 금액, 날짜, 최소 주문 금액 정책에 따라 할인 정책과 증정 정책을 결정
* MinimumOrderTotalPolicy  
최소 주문 금액을 관리하는 클래스  
총 결제 금액과 최소 주문 금액을 비교하여 혜택이 유효한지 결정
* TotalProfitPolicy  
총 혜택 금액을 관리하는 클래스  
할인 증정 정책에 따라 총 혜택 금액을 계산

total  
* OrderTotalBeforeDiscount  
할인 전 총주문 금액을 저장하는 클래스
* ExpectedTotalAfterDiscount  
할인 후 예상 결제 금액을 저장하는 클래스  
할인 전 총 주문 금액과 총 혜택 정책에 따라 예상 결제 금액을 계산
  
<br/>  

**christmas.controller**  
* PromotionController  
전체적인 프로그램 진행을 관리하는 클래스  
* DomainController  
domain 패키지를 관리하는 클래스
* ViewController  
view 패키지를 관리하는 클래스
  
<br/>  

**christmas.view**  
input  
* Reader, ConsoleReader  
프로그램에서 입력 기능을 담당하는 클래스  
Reader 인터페이스를 Console API를 사용해 ConsoleReader로 구현
* InputView  
입력 기능을 조절하는 클래스

output  
* Writer, StdoutWriter  
프로그램에서 출력 기능을 담당하는 클래스  
Writer 인터페이스를 표준 출력을 사용해 StdoutWriter로 구현  
* OutputView  
출력 기능을 조절하는 클래스

<br/>  

**christmas.enums**  
* Badge  
12월 이벤트 배지를 구현한 enum 객체  
배지의 이름과 최소 혜택 금액을 저장
* Calander  
2023년 12월 날짜를 구현한 enum 객체  
특별 할인 날짜, 요일을 저장
* Menu  
메뉴판을 구현한 enum 객체  
메뉴 별 카테고리, 이름, 가격을 저장
* MenuCategory  
메뉴 카테고리를 구현한 enum 객체
* Present  
증정 메뉴를 구현한 enum 객체  
최소 주문 금액, 증정 메뉴 이름, 개수를 저장
  
<br/>  

**christmas.util**  
* Parser  
전달받은 객체를 원하는 형태로 변환하는 클래스  
문자열을 숫자로, 구분자를 사용해 문자열을 분할하는 기능을 담당  

* * * * *  

### 기능 요구 사항   
- [x] 입력
  - [x] 예상 방문 날짜
  - [x] 주문 메뉴와 개수
    - [x] Format: "해산물파스타-2,레드와인-1,초코케이크-1, ..."
    - [x] 메뉴 및 가격
      - 애피타이저
        - 양송이수프(6,000), 타파스(5,500), 시저샐러드(8,000)
      - 메인
        - 티본스테이크(55,000), 바비큐립(54,000), 해산물파스타(35,000), 크리스마스파스타(25,000)
      - 디저트
        - 초코케이크(15,000), 아이스크림(5,000)
      - 음료
        - 제로콜라(3,000), 레드와인(60,000), 샴페인(25,000)
- [x] 연산
  - [x] 할인 전 총주문 금액
    - (가격 * 주문 개수) 합
  - [x] 혜택 내역 = 할인 + 증정
    - [x] 총주문 금액이 10,000원 이상부터 이벤트 적용
    - [x] 할인
      - [x] 크리스마스 디데이 할인
      - [x] 평일 할인(일, 월, 화, 수, 목)
      - [x] 주말 할인(금, 토)
      - [x] 특별 할인
    - [x] 증정
      - [x] 샴페인 증정 이벤트
  - [x] 총혜택 금액
    - 할인 금액의 합계 + 증정 메뉴의 가격
  - [x] 할인 후 예상 결제 금액을 계산한다.
    - 할인 전 총 주문 금액 - 할인 금액
  - [x] 이벤트 배지
- [x] 출력
  - [x] 프로그램 진행 문구
  - [x] 주문 메뉴와 개수
  - [x] 총주문 금액 (할인 전)
  - [x] 증정 메뉴
    - [x] 증정 메뉴가 없으면 "없음"
  - [x] 혜택 내역
    - [x] 적용된 이벤트 내역만 출력
    - [x] 혜택 내역이 없으면 "없음"
    - [x] 출력 순서는 자유롭게
  - [x] 총혜택 금액
  - [x] 예상 결제 금액 (할인 후)
  - [x] 이벤트 배지
    - [x] 이벤트 배지가 없으면 "없음"
  - [x] 에러 메세지
    - [x] 유효하지 않은 날짜
    - [x] 유효하지 않은 주문
- [x] 예외 처리
  - [x] 예상 방문 날짜
    - [x] 숫자가 아닐 때
    - [x] 1 이상 31 이하가 아닐 때
  - [x] 주문 메뉴와 개수
    - [x] 입력이 형식에 맞지 않을 때
  - [x] 주문 메뉴
    - [x] 없는 메뉴를 입력했을 때
    - [x] 중복 메뉴를 입력했을 때
    - [x] 음료만 주문했을 때
  - [x] 주문 개수
    - [x] 숫자가 아닐 때
    - [x] 0 또는 음수일 때
    - [x] 총 개수가 20개를 초과할 때

* * * * *  

### 프로그래밍 요구 사항   
- [x] JDK17
- [x] 시작점: Application의 main()
- [x] build.gradle 수정 불가
- [x] JAVA 코드 컨벤션 가이드 준수
- [x] System.exit() 호출 금지
- [x] ApplicationTest 통과
- [x] 요구사항 없으면 파일, 패키지 이름 수정하지 않는다
- [x] 들여쓰기 최대 2
- [x] 3항 연산자를 사용하지 않는다
- [x] 메서드는 한 가지 일만 하도록 최대한 작게
  - [x] 메서드는 15라인을 넘을 수 없다
- [x] JUnit5와 AssertJ를 활용해서 프로그램 테스트
  - [x] 도메인 로직에 단위 테스트 구현
  - [x] UI로직은 제외
- [x] else 예약어를 쓰지 않는다
- [x] 사용자가 잘못된 값을 입력하면
  - [x] IllegalArgumentException 발생
  - [x] "[ERROR]"로 시작하는 에러 메시지 출력
  - [x] 예외 발생 지점부터 다시 시작
- [x] 명확한 유형으로 예외 처리
  - [x] IllegalArgumentException, IllegalStateException, ...
- [x] 라이브러리
  - [x] Console API 사용
  - [x] 사용자 입력: Console.readLine()
- [x] 입출력 클래스 구현
  - [x] 입력: InputView
  - [x] 출력: OutputView